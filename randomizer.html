<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Randomly discover movies and TV shows">
  <title>Random Discovery - FossBOX</title>
  
  <!-- Authentication Check -->
  <script src="auth-check.js"></script>
  
  <!-- Styles -->
  <link rel="stylesheet" href="assets/css/styles.css">
  
  <!-- Configuration -->
  <script src="assets/js/config.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="logo">
      <img src="assets/site-logo.png" alt="Showbox Logo">
      <span style="color: #A3FC13;">Show<strong style="color: #fe531e;">box</strong></span>
    </div>
    
    <!-- Header Search -->
    <div class="header-search">
      <form class="search-form" id="headerSearchForm">
        <input type="text" id="headerSearchInput" placeholder="Search movies & TV shows..." autocomplete="off">
        <a href="advanced-search.html">Advanced<br />Search!</a>
        <button type="submit" class="search-btn">üîç</button>
      </form>
      <div class="search-results" id="headerSearchResults" style="display: none;"></div>
    </div>

    <!-- Navigation -->
    <nav class="site-nav" role="navigation" aria-label="Main navigation">
      <a href="index.html">HOME</a>
      <a href="pages/movies.html">Movies</a>
      <a href="pages/tv.html">TV Shows</a>
      <a href="pages/cartoons.html">Cartoons/Anime</a>
      <a href="randomizer.html" class="active">Random Discover</a>
      <a href="pages/about.html">About</a>
    </nav>
  </header>

  <!-- Random Content Section -->
  <section class="random-content-section" style="margin: 60px auto; max-width: 1400px; padding: 0 20px;">
    <h2 style="color: var(--text-primary); text-align: center; font-size: 2.5rem; margin-bottom: 30px; font-weight: 800;">
      üé≤ Discover Something New
    </h2>

    <!-- Control Buttons (Top) -->
    <div class="random-controls" style="display: flex; justify-content: center; gap: 15px; margin-bottom: 40px; flex-wrap: wrap;">
      <button id="refresh-movies-btn" class="category-btn" style="background: #00bcd4; color: #000; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.2s; font-size: 0.9rem;">
        üé¨ New Movies
      </button>
      <button id="refresh-tv-btn" class="category-btn" style="background: #00bcd4; color: #000; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.2s; font-size: 0.9rem;">
        üì∫ New TV Shows
      </button>
    </div>
    
    <div class="random-content-container" style="max-width: 1200px; margin: 0 auto;">
      <style>
        @media (max-width: 768px) {
          .random-content-section h2 { font-size: 2rem !important; }
          .random-section h3 { font-size: 1.4rem !important; }
          .random-controls { gap: 10px !important; }
          .random-controls button { padding: 10px 16px !important; font-size: 0.85rem !important; }
        }
        .random-controls button:hover {
          background: #0097a7 !important;
          transform: translateY(-2px);
        }
        .random-controls button.active {
          background: #0097a7 !important;
          box-shadow: 0 4px 12px rgba(0, 188, 212, 0.5);
        }
        .random-section {
          display: none;
        }
        .random-section.active {
          display: block;
        }
        /* Override any min-height on grids */
        #random-movies-grid,
        #random-tv-grid {
          min-height: 0 !important;
        }
      </style>
      
      <!-- Random Movies -->
      <div class="random-section" id="movies-section">
        <h3 style="color: var(--accent-primary); font-size: 1.6rem; margin-bottom: 15px; text-align: center; font-weight: 700;">
          üé¨ Random Movies
        </h3>
        <div class="movie-list" id="random-movies-grid">
        </div>
      </div>

      <!-- Random TV Shows -->
      <div class="random-section" id="tv-section">
        <h3 style="color: var(--accent-primary); font-size: 1.6rem; margin-bottom: 15px; text-align: center; font-weight: 700;">
          üì∫ Random TV Shows
        </h3>
        <div class="movie-list" id="random-tv-grid">
        </div>
      </div>
    </div>

    <!-- Control Buttons (Bottom) -->
    <div class="random-controls" style="display: flex; justify-content: center; gap: 15px; margin-top: 40px; flex-wrap: wrap;">
      <button id="refresh-movies-btn-bottom" class="category-btn" style="background: #00bcd4; color: #000; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.2s; font-size: 0.9rem;">
        üé¨ New Movies
      </button>
      <button id="refresh-tv-btn-bottom" class="category-btn" style="background: #00bcd4; color: #000; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.2s; font-size: 0.9rem;">
        üì∫ New TV Shows
      </button>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer" role="contentinfo">
    <p>&copy; 2024 www.fossbox.cc. All rights reserved.</p>
    <p>Powered by <a href="https://www.themoviedb.org/" target="_blank" rel="noopener">The Movie Database (TMDb)</a></p>
  </footer>

  <!-- Scripts -->
  <script src="assets/js/app.js"></script>
  
  <!-- Section Toggle Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Section Toggle Logic
      const moviesBtn = document.getElementById('refresh-movies-btn');
      const tvBtn = document.getElementById('refresh-tv-btn');
      const moviesBtnBottom = document.getElementById('refresh-movies-btn-bottom');
      const tvBtnBottom = document.getElementById('refresh-tv-btn-bottom');
      const moviesSection = document.getElementById('movies-section');
      const tvSection = document.getElementById('tv-section');
      
      let currentCategory = 'movies'; // Track current category

      function showMovies() {
        currentCategory = 'movies';
        moviesSection.classList.add('active');
        tvSection.classList.remove('active');
        
        // Update all category buttons
        document.querySelectorAll('.category-btn').forEach(btn => {
          if (btn.id.includes('movies')) {
            btn.classList.add('active');
          } else {
            btn.classList.remove('active');
          }
        });
        
        // Trigger the movie refresh using RandomContentManager
        if (window.RandomContentManager) {
          window.RandomContentManager.loadRandomMovies();
        }
      }

      function showTV() {
        currentCategory = 'tv';
        tvSection.classList.add('active');
        moviesSection.classList.remove('active');
        
        // Update all category buttons
        document.querySelectorAll('.category-btn').forEach(btn => {
          if (btn.id.includes('tv')) {
            btn.classList.add('active');
          } else {
            btn.classList.remove('active');
          }
        });
        
        // Trigger the TV refresh using RandomContentManager
        if (window.RandomContentManager) {
          window.RandomContentManager.loadRandomTV();
        }
      }

      // Add event listeners to all buttons
      moviesBtn?.addEventListener('click', showMovies);
      tvBtn?.addEventListener('click', showTV);
      moviesBtnBottom?.addEventListener('click', showMovies);
      tvBtnBottom?.addEventListener('click', showTV);

      // Show movies by default on load
      showMovies();
    });
  </script>
</body>
</html>
